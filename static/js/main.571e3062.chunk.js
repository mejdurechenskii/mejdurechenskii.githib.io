(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(25))},17:function(e,t,n){e.exports=n(29)},25:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.EOL="\r\n",e.BOM="\ufeff",e.DEFAULT_FIELD_SEPARATOR=",",e.DEFAULT_DECIMAL_SEPARATOR=".",e.DEFAULT_QUOTE='"',e.DEFAULT_SHOW_TITLE=!1,e.DEFAULT_TITLE="My Generated Report",e.DEFAULT_FILENAME="base",e.DEFAULT_SHOW_LABELS=!1,e.DEFAULT_USE_TEXT_FILE=!1,e.DEFAULT_USE_BOM=!0,e.DEFAULT_HEADER=[],e.DEFAULT_KEYS_AS_HEADERS=!1,e}();t.CsvConfigConsts=r,t.ConfigDefaults={filename:r.DEFAULT_FILENAME,fieldSeparator:r.DEFAULT_FIELD_SEPARATOR,quoteStrings:r.DEFAULT_QUOTE,decimalSeparator:r.DEFAULT_DECIMAL_SEPARATOR,showLabels:r.DEFAULT_SHOW_LABELS,showTitle:r.DEFAULT_SHOW_TITLE,title:r.DEFAULT_TITLE,useTextFile:r.DEFAULT_USE_TEXT_FILE,useBom:r.DEFAULT_USE_BOM,headers:r.DEFAULT_HEADER,useKeysAsHeaders:r.DEFAULT_KEYS_AS_HEADERS};var s=function(){function e(e){this._csv="";var n=e||{};this._options=i({},t.ConfigDefaults,n),this._options.useKeysAsHeaders&&this._options.headers&&this._options.headers.length>0&&console.warn("Option to use object keys as headers was set, but headers were still passed!")}return Object.defineProperty(e.prototype,"options",{get:function(){return this._options},set:function(e){this._options=i({},t.ConfigDefaults,e)},enumerable:!0,configurable:!0}),e.prototype.generateCsv=function(e,t){if(void 0===t&&(t=!1),this._csv="",this._parseData(e),this._options.useBom&&(this._csv+=r.BOM),this._options.showTitle&&(this._csv+=this._options.title+"\r\n\n"),this._getHeaders(),this._getBody(),""!=this._csv){if(t)return this._csv;var n=this._options.useTextFile?"plain":"csv",s=this._options.useTextFile?".txt":".csv",o=new Blob([this._csv],{type:"text/"+n+";charset=windows-1251;"});if(navigator.msSaveBlob){var a=this._options.filename.replace(/ /g,"_")+s;navigator.msSaveBlob(o,a)}else{this._options.useTextFile,encodeURI(this._csv);var i=document.createElement("a");i.href=URL.createObjectURL(o),i.setAttribute("visibility","hidden"),i.download=this._options.filename.replace(/ /g,"_")+s,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}else console.log("Invalid data")},e.prototype._getHeaders=function(){if(this._options.showLabels||this._options.useKeysAsHeaders){var e=this._options.useKeysAsHeaders?Object.keys(this._data[0]):this._options.headers;if(e.length>0){for(var t="",n=0;n<e.length;n++)t+=e[n]+this._options.fieldSeparator;t=t.slice(0,-1),this._csv+=t+r.EOL}}},e.prototype._getBody=function(){for(var e=Object.keys(this._data[0]),t=0;t<this._data.length;t++){for(var n="",s=0;s<e.length;s++){var o=e[s];n+=this._formatData(this._data[t][o])+this._options.fieldSeparator}n=n.slice(0,-1),this._csv+=n+r.EOL}},e.prototype._formatData=function(e){return"locale"===this._options.decimalSeparator&&this._isFloat(e)?e.toLocaleString():"."!==this._options.decimalSeparator&&this._isFloat(e)?e.toString().replace(".",this._options.decimalSeparator):"string"===typeof e?(e=e.replace(/"/g,'""'),(this._options.quoteStrings||e.indexOf(",")>-1||e.indexOf("\n")>-1||e.indexOf("\r")>-1)&&(e=this._options.quoteStrings+e+this._options.quoteStrings),e):"boolean"===typeof e?e?"TRUE":"FALSE":e},e.prototype._isFloat=function(e){return+e===e&&(!isFinite(e)||Boolean(e%1))},e.prototype._parseData=function(e){return this._data="object"!=typeof e?JSON.parse(e):e,this._data},e}();t.ExportToCsv=s;var o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function i(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];for(var s,i=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),c=1;c<arguments.length;c++){for(var u in t=Object(arguments[c]))o.call(t,u)&&(i[u]=t[u]);if(Object.getOwnPropertySymbols){s=Object.getOwnPropertySymbols(t);for(var l=0;l<s.length;l++)a.call(t,s[l])&&(i[s[l]]=t[s[l]])}}return i}},29:function(e,t,n){"use strict";n.r(t);var r=n(2),s=n.n(r),o=n(10),a=n(3),i=n.n(a),c=n(7),u=n(5),l=n(6),p=n(14),h=n(11),f=n(15),_=n(31),g=n(12),d=n(13),m=n(4),b=n(8),v=n(30),y=n(32),O=(n(26),function(){function e(){var t=this;Object(u.a)(this,e),this.init=function(e){t.with_characters=Object(b.a)(Array(32).keys()).map(function(e){return String.fromCharCode(e+1040)}),t.with_vocabulary=Object.assign.apply(Object,[{}].concat(Object(b.a)(Array.from(t.with_characters,function(e){var t=Object(m.a)(e,2),n=t[0];t[1];return Object(d.a)({},n,[])})))),Object.values(e).map(function(e){return t.with_structure.push(e.selector),0}),t.with_structure=t.with_structure.reduce(function(e,t){return e[t]=[],e},{})},this.merge=function(e){return function(t){return console.log("merge: "+Object.values(t).length),Object.keys(t).map(function(n){Object.values(e).filter(function(e){return e.ids.includes(n)&&Number(e.id_location)===Number(1)}).map(function(e){[e].reduce(function(e,r,s){e={category:r.ids,nomination:v.a(r.name).replace(/\&\#\d{4};/g,""),address:v.a(r.address.replace(/\u0443\u043b. |\u0443\u043b./gi,"")),specification:v.a(r.dpl),selector:r.selector,phones:r.phone,separator:";"},t[n].push(e)},{})})}),t}},this.premium=function(){return function(e){var n=[];return console.log("premium: "+Object.values(e).length),Object.keys(e).reduce(function(r,s){return Object.values(e[s]).map(function(e,n){r[s]=r[s]||[],t.with_premium.includes(e.selector)&&n>0&&(e.separator=";1;;"),r[s].push(e)}),n=r,r},{}),n}},this.location=function(){return function(e){console.log("location: "+Object.values(e).length);var t=y.a(e);return Object.keys(e).map(function(n){Object.keys(e[n]).map(function(r){Object.values(e[n][r]).map(function(e,s){if("undefined"!==typeof e.address)if(e.address.includes(",")){var o=e.address.replace(/\u0443\u043b. |\u0443\u043b./gi,""),a=o.split(",")[0],i=o.split(",")[1].replace(/\D+/g,"");t[n][r][s].address=String(a+", "+i)}else t[n][r][s].address=e.address;else t[n][r][s].address="\u0410\u0434\u0440\u0435\u0441 \u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"})})}),t}},this.contacts=function(){return function(e){console.log("Contacts: edit smart system");var t=y.a(e);Object.keys(e).map(function(n){Object.keys(e[n]).map(function(r){Object.values(e[n][r]).map(function(e,s){if(e.separator.includes("https://dl.dropboxusercontent.com/")||e.separator.includes("https://konda86.ru/")){if("undefined"!==typeof e.phones)if(String(e.phones).indexOf(";")>-1){var o;c=e.phones.split(";").filter(function(e){return e.replace(/\D+/g,"").replace(/[()]/g,"")});t[n][r][s].phones=c.join(";;").replace(/\s+/g,"").replace(/[()]/g,""),o=25-2*c.length-e.separator.match(/;/gi).length,t[n][r][s].separator=";".repeat(o)+e.separator}else{var a;t[n][r][s].phones=e.phones.replace(/[()]/g,""),a=23-e.separator.match(/;/gi).length,t[n][r][s].separator=";".repeat(a)+e.separator}}else if("undefined"!==typeof e.phones)if(String(e.phones).indexOf(";")>-1){var i,c=e.phones.split(";").filter(function(e){return e.replace(/\D+/g,"").replace(/[()]/g,"")});t[n][r][s].phones=c.join(";;").replace(/\s+/g,"").replace(/[()]/g,""),i=24-2*c.length-e.separator.match(/;/gi).length,t[n][r][s].separator=";".repeat(i)+e.separator}else{var u;t[n][r][s].phones=e.phones.replace(/[()]/g,""),u=22-e.separator.match(/;/gi).length,t[n][r][s].separator=";".repeat(u)+e.separator}})})});var n=[];return Object.values(t["\u0422"][755][0]).map(function(e){n.push(e)}),console.log(n.join(";")+";"),console.log(n.join(";").match(/;/gi).length),n=[],Object.values(t["\u0422"][757][0]).map(function(e){n.push(e)}),console.log(n.join(";")+";"),t}},this.pay_banner=function(e){return function(t){var n=JSON.parse(JSON.stringify(t));console.log("pay_banner: 100%");var r=Object.keys(t).map(function(e){return e});return e.map(function(e){r=r.filter(function(t){return!e.groups.includes(t)}),e.groups.map(function(t){n[t][1].selector===e.selector&&(n[t][1].separator=";0;;"+e.banner)})}),r.map(function(e){n[e].push({category:n[e][0].category,nomination:"\u041c\u0435\u0441\u0442\u043e \u043f\u043e\u0434 \u0432\u0430\u0448 \u0431\u0430\u043d\u043d\u0435\u0440",specification:"\u041c\u0435\u0441\u0442\u043e \u043f\u0440\u043e\u0434\u0430\u0451\u0442\u0441\u044f",address:"\u041c\u0435\u0436\u0434\u0443\u0440\u0443\u0447\u0435\u043d\u0441\u043a\u0438\u0439",phones:"999-999-99-99",selector:"000",separator:";0;;https://dl.dropboxusercontent.com/s/665ejhswg3pyls0/%D0%9F%D0%9F%20-%20mid.jpg?dl=0"})}),n}},this.popular=function(e){return function(t){console.log("category: "+Object.values(t).length);var n=[];return Object.keys(t).reduce(function(r,s){return Object.values(t[s]).map(function(t,n){switch(s){case"755":r[s]=r[s]||[],t.category="\u0422\u0430\u043a\u0441\u0438",0===n&&(t.separator=";1"),r[s].push(t);break;case"588":r[s]=r[s]||[],t.category="\u041a\u0430\u0444\u0435",0===n&&(t.separator=";2"),r[s].push(t);break;case"751":r[s]=r[s]||[],t.category="\u0413\u0440\u0443\u0437\u043e\u043f\u0435\u0440\u0435\u0432\u043e\u0437\u043a\u0438",0===n&&(t.separator=";3"),r[s].push(t);break;case"676":r[s]=r[s]||[],t.category="\u041f\u0430\u0440\u0438\u043a\u043c\u0430\u0445\u0435\u0440\u0441\u043a\u0438\u0435",0===n&&(t.separator=";4"),r[s].push(t);break;case"597":r[s]=r[s]||[],t.category="\u0420\u0435\u043c\u043e\u043d\u0442 \u043a\u043e\u043c\u043f\u044a\u044e\u0442\u0435\u0440\u043e\u0432",0===n&&(t.separator=";5"),r[s].push(t);break;case"582":r[s]=r[s]||[],t.category="\u0413\u043e\u0441\u0442\u0438\u043d\u0438\u0446\u044b",0===n&&(t.separator=";6"),r[s].push(t);break;case"654":r[s]=r[s]||[],t.category="\u0410\u043f\u0442\u0435\u043a\u0438",0===n&&(t.separator=";7"),r[s].push(t);break;case"612":r[s]=r[s]||[],t.category="\u0424\u043e\u0442\u043e\u0443\u0441\u043b\u0443\u0433\u0438",0===n&&(t.separator=";8"),r[s].push(t);break;default:var o=e.filter(function(e){return Number(e.selector)===Number(s)});r[s]=r[s]||[],t.category=v.a(String(o[0].name)).replace(/\&\#\d{4};/g,"").replace(/,/gi," |"),r[s].push(t)}}),n=r,r},{}),n}},this.impurity=function(){return function(e){var t=y.a(e);t[999]=[];return Object.values([{category:"\u042d\u043a\u0441\u0442\u0440\u0435\u043d\u043d\u044b\u0435 \u0441\u043b\u0443\u0436\u0431\u044b",nomination:"\u0415\u0434\u0438\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u044d\u043a\u0441\u0442\u0440\u0435\u043d\u043d\u043e\u0439 \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u0441\u043b\u0443\u0436\u0431\u044b",specification:"\u0415\u0434\u0438\u043d\u044b\u0439 \u043d\u043e\u043c\u0435\u0440 \u044d\u043a\u0441\u0442\u0440\u0435\u043d\u043d\u043e\u0439 \u043e\u043f\u0435\u0440\u0430\u0442\u0438\u0432\u043d\u043e\u0439 \u0441\u043b\u0443\u0436\u0431\u044b",address:"",phones:"112",separator:";1;1;9"},{category:"\u042d\u043a\u0441\u0442\u0440\u0435\u043d\u043d\u044b\u0435 \u0441\u043b\u0443\u0436\u0431\u044b",nomination:"\u041f\u043e\u0436\u0430\u0440\u043d\u0430\u044f \u0438 \u041c\u0427\u0421",specification:"\u041f\u043e\u0436\u0430\u0440\u043d\u0430\u044f \u0438 \u041c\u0427\u0421",address:"\u041f\u043e\u0436\u0430\u0440\u043d\u0430\u044f \u0438 \u041c\u0427\u0421",phones:"101",separator:";1;2;"},{category:"\u042d\u043a\u0441\u0442\u0440\u0435\u043d\u043d\u044b\u0435 \u0441\u043b\u0443\u0436\u0431\u044b",nomination:"\u041f\u043e\u043b\u0438\u0446\u0438\u044f",specification:"\u041f\u043e\u043b\u0438\u0446\u0438\u044f",address:"\u041f\u043e\u043b\u0438\u0446\u0438\u044f",phones:"102",separator:";1;3;"},{category:"\u042d\u043a\u0441\u0442\u0440\u0435\u043d\u043d\u044b\u0435 \u0441\u043b\u0443\u0436\u0431\u044b",nomination:"\u0421\u043a\u043e\u0440\u0430\u044f \u043f\u043e\u043c\u043e\u0449\u044c",specification:"\u0421\u043a\u043e\u0440\u0430\u044f \u043f\u043e\u043c\u043e\u0449\u044c",address:"\u0421\u043a\u043e\u0440\u0430\u044f \u043f\u043e\u043c\u043e\u0449\u044c",phones:"103",separator:";1;4;"}]).map(function(e){t[999].push(e)}),console.log("plus: Ok"),t}},this.complex=function(){return function(e){var n=y.a(t.with_vocabulary);return console.log("complex: Ok"),t.with_characters.map(function(r){Object.keys(e).map(function(s){Object.values(e[s]).map(function(e,o){t.with_vocabulary[r].includes(s)||e.category.charAt(0)===String(r)&&(n[r][s]=n[r][s]||[],n[r][s].push({category:e.category,nomination:e.nomination,address:e.address,specification:e.specification,phones:e.phones,separator:e.separator}))})})}),n}},this.sorting=function(){return function(e){console.log("lifting: ");var t=Object.keys(e).map(function(e){return e});return console.log(e),Object.keys(e).reduce(function(n,r){Object.entries(e[r]).map(function(e){var s=Object(m.a)(e,2),o=s[0],a=s[1];console.log(t),console.log(a),n[r][o]=a[0].category||[]})},[]),console.log([]),e}},this.lifting=function(){return function(e){console.log("lifting: ");var t=y.a(e),n={};return Object.entries(e).map(function(r){var s=Object(m.a)(r,2),o=s[0];s[1];Object.entries(e[o]).map(function(r){var s=Object(m.a)(r,2),a=s[0];s[1];Object.values(e[o][a]).reduce(function(r,s,i){"undefined"!==typeof s.separator&&(s.separator.includes(";https://konda86.ru/a/")?(n=e[o][a][1],t[o][a][1]=s,t[o][a][i]=n):s.separator.includes(";https://dl.dropboxusercontent.com/s/")&&(n=e[o][a][1],t[o][a][1]=s,t[o][a][i]=n))})})}),console.log(t["\u0420"][597]),t}},this.linear=function(){return function(e){var t=[];return console.log("flatten: Ok"),Object.values(e).map(function(e){Object.values(e).map(function(e){Object.values(e).map(function(e){t.push(e)})})}),t}},this.collector=function(){return function(e){var t=[];return Object.values(e).map(function(e){e.selector="",t.push(e)}),t}},this.corrector=function(){return function(e){return Object.values(e).map(function(e){if("undefined"!==typeof e){var t=e.separator.match(/;/gi).length;if(e.separator.includes("https://konda86.ru/")&&22!==t){var n=22-t;t>22&&(console.log("separator:"+e.separator),console.log("lengher:"+t),console.log("22 < "+n)),t<22&&(console.log("separator:"+e.separator),console.log("lengher:"+t),console.log("22 > "+n))}e.separator.includes("https://dl.dropboxusercontent.com/"),!e.separator.includes("https://dl.dropboxusercontent.com/")&&e.separator.includes("https://konda86.ru/")}}),e}},this.helper=function(){return function(e){var t=[];return Object.values(e).reduce(function(e,n,r){e=Object.values(n).join(";"),t.push(e)},""),console.log(t),t}},this.all_companies="",this._init=this.init,this._merge=this.merge,this._location=this.location,this._contacts=this.contacts,this._premium=this.premium,this._complex=this.complex,this._lifting=this.lifting,this._sorting=this.sorting,this._assembly_banner=this.assembly_banner,this._collection=this.collection,this._popular=this.popular,this._banner=this.pay_banner,this._linear=this.linear,this._impurity=this.impurity,this._collector=this.collector,this._corrector=this.corrector,this.with_vocabulary=[],this.with_characters=[],this.with_structure=[],this.with_premium=[],this.with_banner=[],this.with_choose=[]}return Object(l.a)(e,[{key:"assembly_banner",value:function(e){var t=this;Object.values(e).map(function(e){if("A"===e.flag&&t.with_premium.push(e.selector),e.manager){var n=e.ids.split("#0:").join("#").split("#").filter(function(e){return e.length>=3});t.with_banner.push({banner:e.manager.split(";")[0],groups:n,selector:e.selector})}})}}]),e}()),j=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(h.a)(t).call(this,e))).state={all_companies:[],all_categories:[],csv_companies:[],pre_loading:!0,lengher:0},n._get_companies=n.get_companies,n._get_categories=n.get_categories,n._generate_csv_base=n.generate_csv_base,n._csv_exporter=n.csv_exporter,n}return Object(f.a)(t,e),Object(l.a)(t,[{key:"shouldComponentUpdate",value:function(e,t){return console.log(t),!(!t.pre_loading||this.state.all_companies===t.all_companies||this.state.all_categories===t.all_categories||this.state.csv_companies===t.csv_companies)&&(this.setState({pre_loading:!1}),!0)}},{key:"get_companies",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://konda86.ru/api.php?req=ALL_USER");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"get_categories",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://konda86.ru/api.php?req=SUB_CATEGORY");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"generate_csv_base",value:function(e,t){var n=new O;return n._init(t),n._assembly_banner(e),{all_companies:_.a(n._linear(),n._contacts(),n._location(),n._lifting(),n._complex(),n._impurity(),n._banner(n.with_banner),n._premium(n.with_premium),n._popular(t),n._merge(e))(n.with_structure)}}},{key:"csv_exporter",value:function(e){new g.ExportToCsv({fieldSeparator:";",quoteStrings:"",decimalSeparator:".",showLabels:!1,showTitle:!1,useTextFile:!1,useBom:!1,useKeysAsHeaders:!1}).generateCsv(e)}},{key:"exporting",value:function(){var e=Object(c.a)(i.a.mark(function e(){var t,n,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.get_companies();case 2:return t=e.sent,e.next=5,this.get_categories();case 5:return n=e.sent,e.next=8,this.generate_csv_base(t,n);case 8:return r=e.sent,this.setState({all_companies:t,all_categories:n,csv_companies:r.all_companies}),e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.csv_companies;return this.exporting()&&console.log("loading..."),s.a.createElement("div",null,t?s.a.createElement("a",{class:"face-button",href:"#",onClick:function(){return e._csv_exporter(t)}},s.a.createElement("div",{class:"face-primary"},s.a.createElement("span",{class:"icon fa fa-cloud"}),"\u0421\u043a\u0430\u0447\u0430\u0442\u044c"),s.a.createElement("div",{class:"face-secondary"},s.a.createElement("span",{class:"icon fa fa-hdd-o"}),"\u0420\u0430\u0437\u043c\u0435\u0440: 218 \u043a\u0431")):null)}}]),t}(r.Component);Object(o.render)(s.a.createElement(j,null),document.getElementById("root"))}},[[17,2,1]]]);
//# sourceMappingURL=main.571e3062.chunk.js.map