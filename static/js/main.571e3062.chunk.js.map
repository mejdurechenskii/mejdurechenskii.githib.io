{"version":3,"sources":["package/export-to-csv/index.js","package/export-to-csv/export-to-csv.js","package/extender.js","package/exporter.js","index.js"],"names":["Object","defineProperty","exports","value","m","p","hasOwnProperty","__export","require","CsvConfigConsts","EOL","BOM","DEFAULT_FIELD_SEPARATOR","DEFAULT_DECIMAL_SEPARATOR","DEFAULT_QUOTE","DEFAULT_SHOW_TITLE","DEFAULT_TITLE","DEFAULT_FILENAME","DEFAULT_SHOW_LABELS","DEFAULT_USE_TEXT_FILE","DEFAULT_USE_BOM","DEFAULT_HEADER","DEFAULT_KEYS_AS_HEADERS","ConfigDefaults","filename","fieldSeparator","quoteStrings","decimalSeparator","showLabels","showTitle","title","useTextFile","useBom","headers","useKeysAsHeaders","ExportToCsv","options","this","_csv","config","_options","objectAssign","length","console","warn","prototype","get","set","enumerable","configurable","generateCsv","jsonData","shouldReturnCsv","_parseData","_getHeaders","_getBody","FileType","fileExtension","blob","Blob","type","navigator","msSaveBlob","replace","encodeURI","link","document","createElement","href","URL","createObjectURL","setAttribute","download","body","appendChild","click","removeChild","log","keys","_data","row","keyPos","slice","i","key","_formatData","data","_isFloat","toLocaleString","toString","indexOf","input","isFinite","Boolean","JSON","parse","propIsEnumerable","propertyIsEnumerable","target","from","source","_i","arguments","symbols","to","val","undefined","TypeError","toObject","s","call","getOwnPropertySymbols","Extender","_this","classCallCheck","init","with_characters","toConsumableArray","Array","map","l","String","fromCharCode","with_vocabulary","assign","apply","concat","_ref","_ref2","slicedToArray","k","values","next","with_structure","push","selector","reduce","prev","merge","all_companies","indexes","uid","filter","ids","includes","Number","id_location","e","index","category","nomination","R","name","address","specification","dpl","phones","phone","separator","premium","pull","raw","r","with_premium","location","n","v","j","curr_address","curr_street","split","curr_house","contacts","big_formule","filtred_phones","ph","join","match","repeat","little_formule","concate","pay_banner","banner","stringify","uides","b","el","groups","g","N","popular","all_categories","reverse","c","impurity","complex","charAt","sorting","le","entries","_ref4","_ref5","id","fi","lifting","swap","_ref6","_ref7","key_a","_ref8","_ref9","key_n","linear","collector","corrector","lengher","diverge","helper","_init","_merge","_location","_contacts","_premium","_complex","_lifting","_sorting","_assembly_banner","assembly_banner","_collection","collection","_popular","_banner","_linear","_impurity","_collector","_corrector","with_banner","with_choose","_this2","flag","manager","Csv","props","possibleConstructorReturn","getPrototypeOf","state","csv_companies","pre_loading","_get_companies","get_companies","_get_categories","get_categories","_generate_csv_base","generate_csv_base","_csv_exporter","csv_exporter","nextProps","nextState","setState","fetch","response","json","x","curry","arr","all_company","all_category","csv_base","exporting","react_default","a","class","onClick","Component","render","exporter","getElementById"],"mappings":"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","file":"static/js/main.571e3062.chunk.js","sourcesContent":["\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./export-to-csv\"));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar CsvConfigConsts = (function () {\n    function CsvConfigConsts() {\n    }\n    CsvConfigConsts.EOL = \"\\r\\n\";\n    CsvConfigConsts.BOM = \"\\ufeff\";\n    CsvConfigConsts.DEFAULT_FIELD_SEPARATOR = ',';\n    CsvConfigConsts.DEFAULT_DECIMAL_SEPARATOR = '.';\n    CsvConfigConsts.DEFAULT_QUOTE = '\"';\n    CsvConfigConsts.DEFAULT_SHOW_TITLE = false;\n    CsvConfigConsts.DEFAULT_TITLE = 'My Generated Report';\n    CsvConfigConsts.DEFAULT_FILENAME = 'base';\n    CsvConfigConsts.DEFAULT_SHOW_LABELS = false;\n    CsvConfigConsts.DEFAULT_USE_TEXT_FILE = false;\n    CsvConfigConsts.DEFAULT_USE_BOM = true;\n    CsvConfigConsts.DEFAULT_HEADER = [];\n    CsvConfigConsts.DEFAULT_KEYS_AS_HEADERS = false;\n    return CsvConfigConsts;\n}());\nexports.CsvConfigConsts = CsvConfigConsts;\nexports.ConfigDefaults = {\n    filename: CsvConfigConsts.DEFAULT_FILENAME,\n    fieldSeparator: CsvConfigConsts.DEFAULT_FIELD_SEPARATOR,\n    quoteStrings: CsvConfigConsts.DEFAULT_QUOTE,\n    decimalSeparator: CsvConfigConsts.DEFAULT_DECIMAL_SEPARATOR,\n    showLabels: CsvConfigConsts.DEFAULT_SHOW_LABELS,\n    showTitle: CsvConfigConsts.DEFAULT_SHOW_TITLE,\n    title: CsvConfigConsts.DEFAULT_TITLE,\n    useTextFile: CsvConfigConsts.DEFAULT_USE_TEXT_FILE,\n    useBom: CsvConfigConsts.DEFAULT_USE_BOM,\n    headers: CsvConfigConsts.DEFAULT_HEADER,\n    useKeysAsHeaders: CsvConfigConsts.DEFAULT_KEYS_AS_HEADERS,\n};\n\nvar ExportToCsv = (function () {\n    function ExportToCsv(options) {\n        this._csv = \"\";\n        var config = options || {};\n        this._options = objectAssign({}, exports.ConfigDefaults, config);\n        if (this._options.useKeysAsHeaders\n            && this._options.headers\n            && this._options.headers.length > 0) {\n            console.warn('Option to use object keys as headers was set, but headers were still passed!');\n        }\n    }\n    Object.defineProperty(ExportToCsv.prototype, \"options\", {\n        get: function () {\n            return this._options;\n        },\n        set: function (options) {\n            this._options = objectAssign({}, exports.ConfigDefaults, options);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    /**\n     * Generate and Download Csv\n     */\n    ExportToCsv.prototype.generateCsv = function (jsonData, shouldReturnCsv) {\n        if (shouldReturnCsv === void 0) { shouldReturnCsv = false; }\n        // Make sure to reset csv data on each run\n        this._csv = '';\n        this._parseData(jsonData);\n        if (this._options.useBom) {\n            this._csv += CsvConfigConsts.BOM;\n        }\n        if (this._options.showTitle) {\n            this._csv += this._options.title + '\\r\\n\\n';\n        }\n        this._getHeaders();\n        this._getBody();\n        if (this._csv == '') {\n            console.log(\"Invalid data\");\n            return;\n        }\n        // When the consumer asks for the data, exit the function\n        // by returning the CSV data built at this point\n        if (shouldReturnCsv) {\n            return this._csv;\n        }\n        // Create CSV blob to download if requesting in the browser and the\n        // consumer doesn't set the shouldReturnCsv param\n        var FileType = this._options.useTextFile ? 'plain' : 'csv';\n        var fileExtension = this._options.useTextFile ? '.txt' : '.csv';\n        var blob = new Blob([this._csv], { \"type\": \"text/\" + FileType + \";charset=windows-1251;\" });\n        if (navigator.msSaveBlob) {\n            var filename = this._options.filename.replace(/ /g, \"_\") + fileExtension;\n            navigator.msSaveBlob(blob, filename);\n        }\n        else {\n            var attachmentType = this._options.useTextFile ? 'text' : 'csv';\n            var uri = 'data:attachment/' + attachmentType + ';charset=windows-1251,' + encodeURI(this._csv);\n            var link = document.createElement(\"a\");\n            link.href = URL.createObjectURL(blob);\n            link.setAttribute('visibility', 'hidden');\n            link.download = this._options.filename.replace(/ /g, \"_\") + fileExtension;\n            document.body.appendChild(link);\n            link.click();\n            document.body.removeChild(link);\n        }\n    };\n    /**\n     * Create Headers\n     */\n    ExportToCsv.prototype._getHeaders = function () {\n        if (!this._options.showLabels && !this._options.useKeysAsHeaders) {\n            return;\n        }\n        var useKeysAsHeaders = this._options.useKeysAsHeaders;\n        var headers = useKeysAsHeaders ? Object.keys(this._data[0]) : this._options.headers;\n        if (headers.length > 0) {\n            var row = \"\";\n            for (var keyPos = 0; keyPos < headers.length; keyPos++) {\n                row += headers[keyPos] + this._options.fieldSeparator;\n            }\n            row = row.slice(0, -1);\n            this._csv += row + CsvConfigConsts.EOL;\n        }\n    };\n    /**\n     * Create Body\n     */\n    ExportToCsv.prototype._getBody = function () {\n        var keys = Object.keys(this._data[0]);\n        for (var i = 0; i < this._data.length; i++) {\n            var row = \"\";\n            for (var keyPos = 0; keyPos < keys.length; keyPos++) {\n                var key = keys[keyPos];\n                row += this._formatData(this._data[i][key]) + this._options.fieldSeparator;\n            }\n            row = row.slice(0, -1);\n            this._csv += row + CsvConfigConsts.EOL;\n        }\n    };\n    /**\n     * Format Data\n     * @param {any} data\n     */\n    ExportToCsv.prototype._formatData = function (data) {\n        if (this._options.decimalSeparator === 'locale' && this._isFloat(data)) {\n            return data.toLocaleString();\n        }\n        if (this._options.decimalSeparator !== '.' && this._isFloat(data)) {\n            return data.toString().replace('.', this._options.decimalSeparator);\n        }\n        if (typeof data === 'string') {\n            data = data.replace(/\"/g, '\"\"');\n            if (this._options.quoteStrings || data.indexOf(',') > -1 || data.indexOf('\\n') > -1 || data.indexOf('\\r') > -1) {\n                data = this._options.quoteStrings + data + this._options.quoteStrings;\n            }\n            return data;\n        }\n        if (typeof data === 'boolean') {\n            return data ? 'TRUE' : 'FALSE';\n        }\n        return data;\n    };\n    /**\n     * Check if is Float\n     * @param {any} input\n     */\n    ExportToCsv.prototype._isFloat = function (input) {\n        return +input === input && (!isFinite(input) || Boolean(input % 1));\n    };\n    /**\n     * Parse the collection given to it\n     *\n     * @private\n     * @param {*} jsonData\n     * @returns {any[]}\n     * @memberof ExportToCsv\n     */\n    ExportToCsv.prototype._parseData = function (jsonData) {\n        this._data = typeof jsonData != 'object' ? JSON.parse(jsonData) : jsonData;\n        return this._data;\n    };\n    return ExportToCsv;\n}());\nexports.ExportToCsv = ExportToCsv;\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\nvar propIsEnumerable = Object.prototype.propertyIsEnumerable;\n/**\n * Convet to Object\n * @param {any} val\n */\nfunction toObject(val) {\n    if (val === null || val === undefined) {\n        throw new TypeError('Object.assign cannot be called with null or undefined');\n    }\n    return Object(val);\n}\n/**\n * Assign data  to new Object\n * @param {any}   target\n * @param {any[]} ...source\n */\nfunction objectAssign(target) {\n    var source = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        source[_i - 1] = arguments[_i];\n    }\n    var from;\n    var to = toObject(target);\n    var symbols;\n    for (var s = 1; s < arguments.length; s++) {\n        from = Object(arguments[s]);\n        for (var key in from) {\n            if (hasOwnProperty.call(from, key)) {\n                to[key] = from[key];\n            }\n        }\n        if (Object.getOwnPropertySymbols) {\n            symbols = Object.getOwnPropertySymbols(from);\n            for (var i = 0; i < symbols.length; i++) {\n                if (propIsEnumerable.call(from, symbols[i])) {\n                    to[symbols[i]] = from[symbols[i]];\n                }\n            }\n        }\n    }\n    return to;\n}\n","import * as R from \"ramda\";\r\nimport * as uuid from \"uuid/v4\";\r\n\r\nclass Extender {\r\n\tconstructor(...args) {\r\n\t\tthis.all_companies = '';\r\n\t\tthis._init = this.init;\r\n\t\tthis._merge = this.merge;\r\n\t\tthis._location = this.location;\r\n\t\tthis._contacts = this.contacts;\r\n\t\tthis._premium = this.premium;\r\n\t\tthis._complex = this.complex;\r\n\t\tthis._lifting = this.lifting;\r\n\t\tthis._sorting = this.sorting;\r\n\t\tthis._assembly_banner = this.assembly_banner;\r\n\t\tthis._collection = this.collection;\r\n\t\tthis._popular = this.popular;\r\n\t\tthis._banner = this.pay_banner;\r\n\t\tthis._linear = this.linear;\r\n\t\tthis._impurity = this.impurity;\r\n\t\tthis._collector = this.collector;\r\n\t\tthis._corrector = this.corrector;\r\n\t\t//this._assembly = this.assembly;\r\n\t\t//this._helper = this.helper;\r\n\t\t// VARIBLES\r\n\t\tthis.with_vocabulary = []; // -> Обьект в виде русского словаря\r\n\t\tthis.with_characters = []; // -> Массив рускоязычных символов\r\n\t\tthis.with_structure = [];  // -> [ number ] -> [{}]\r\n\t\tthis.with_premium = [];    // -> \r\n\t\tthis.with_banner = [];\r\n\t\tthis.with_choose = []; // -> [ number ] -> [total:27, phones:3*2,]\r\n\t}\r\n\t// Инициализация частичных наборов\r\n\tinit = (i) => {\r\n\t\tthis.with_characters = [...Array(32).keys()].map(l => String.fromCharCode(l + 1040));\r\n\t\tthis.with_vocabulary = Object.assign({}, ...Array.from(this.with_characters, ([k, v]) => ({ [k]: [] })));\r\n\t\t// Заполнение массива уникальными айдишниками категорий.\r\n\t\tObject.values(i).map((next) => { this.with_structure.push(next.selector); return 0 });\r\n\t\t// Преобразование массива uids в обьект с уникальными ключами.\r\n\t\tthis.with_structure = this.with_structure.reduce((prev, next) => { prev[next] = []; return prev; }, {});\r\n\t\t//let pull = R.clone(this.with_structure);\r\n\t\t//console.log(pull);\r\n\t}\r\n\tassembly_banner(all_companies) {\r\n\t\t// Сборщик банеров and vip клиентов.\r\n\t\tObject.values(all_companies).map((next) => {\r\n\t\t\tif (next.flag === \"A\") {\r\n\t\t\t\tthis.with_premium.push(next.selector)\r\n\t\t\t}\r\n\t\t\tif (next.manager) {\r\n\t\t\t\tlet groups = next.ids.split('#0:')\r\n\t\t\t\t\t.join('#')\r\n\t\t\t\t\t.split('#')\r\n\t\t\t\t\t.filter((n) => n.length >= 3);\r\n\t\t\t\t//console.log(category);\r\n\t\t\t\tthis.with_banner.push({\r\n\t\t\t\t\tbanner: next.manager.split(\";\")[0],\r\n\t\t\t\t\tgroups: groups,\r\n\t\t\t\t\tselector: next.selector\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\t//else{ free.push(next.selector) } \r\n\t\t});\r\n\t}\r\n\tmerge = (all_companies) => (indexes) => {\r\n\t\tconsole.log(\"merge: \" + Object.values(indexes).length);\r\n\t\tObject.keys(indexes).map((uid) => {\r\n\t\t\tObject.values(all_companies).filter((row) => row.ids.includes(uid) && Number(row.id_location) === Number(1)).map((e) => {\r\n\t\t\t\t[e].reduce(function (prev, next, index) {\r\n\t\t\t\t\tprev = {\r\n\t\t\t\t\t\t'category': next.ids,\r\n\t\t\t\t\t\t'nomination': R.trim(next.name).replace(/\\&\\#\\d{4};/g, ''),\r\n\t\t\t\t\t\t'address': R.trim(next.address.replace(/ул. |ул./ig, '')),\r\n\t\t\t\t\t\t'specification': R.trim(next.dpl),\r\n\t\t\t\t\t\t'selector': next.selector,\r\n\t\t\t\t\t\t'phones': next.phone,\r\n\t\t\t\t\t\t'separator': \";\",\r\n\t\t\t\t\t};\r\n\t\t\t\t\tindexes[uid].push(prev);\r\n\t\t\t\t}, {});\r\n\t\t\t})\r\n\t\t});\r\n\t\treturn indexes;\r\n\t};\r\n\t// Добавление vip идентификатора в сепараторе\r\n\tpremium = () => (i) => {\r\n\t\tlet pull = [];\r\n\t\tconsole.log(\"premium: \" + Object.values(i).length);\r\n\t\tObject.keys(i).reduce((prev, key) => {\r\n\t\t\tObject.values(i[key]).map((raw, r) => {\r\n\t\t\t\tprev[key] = prev[key] || [];\r\n\t\t\t\tif (this.with_premium.includes(raw.selector) && r > 0) {\r\n\t\t\t\t\traw.separator = \";\" + 1 + \";;\";\r\n\t\t\t\t}\r\n\t\t\t\tprev[key].push(raw);\r\n\t\t\t});\r\n\t\t\tpull = prev;\r\n\t\t\treturn prev;\r\n\t\t}, {});\r\n\t\treturn pull;\r\n\t};\r\n\t// Обработка адрессов\r\n\tlocation = () => (i) => {\r\n\t\tconsole.log(\"location: \" + Object.values(i).length);\r\n\t\tlet pull = R.clone(i);\r\n\t\tObject.keys(i).map((l) => {\r\n\t\t\tObject.keys(i[l]).map((n) => {\r\n\t\t\t\tObject.values(i[l][n]).map((v, j) => {\r\n\t\t\t\t\tif (typeof (v.address) !== \"undefined\") {\r\n\t\t\t\t\t\tif (v.address.includes(\",\")) {\r\n\t\t\t\t\t\t\tlet curr_address = v.address.replace(/ул. |ул./ig, '');\r\n\t\t\t\t\t\t\tlet curr_street = curr_address.split(',')[0];\r\n\t\t\t\t\t\t\tlet curr_house = curr_address.split(',')[1].replace(/\\D+/g, '');\r\n\t\t\t\t\t\t\tpull[l][n][j].address = String(curr_street + \", \" + curr_house);\r\n\t\t\t\t\t\t} else { pull[l][n][j].address = v.address; }\r\n\t\t\t\t\t} else { pull[l][n][j].address = \"Адрес не указан\"; }\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\treturn pull;\r\n\t};\r\n\t// Обработка номеров телефонов\r\n\tcontacts = () => (i) => {\r\n\t\t// Собрать this.with_choose colphones\r\n\t\tconsole.log('Contacts: edit smart system');\r\n\t\t//console.log(i);\r\n\t\tlet pull = R.clone(i);\r\n\t\tObject.keys(i).map((l) => {\r\n\t\t\tObject.keys(i[l]).map((n) => {\r\n\t\t\t\tObject.values(i[l][n]).map((v, j) => {\r\n\t\t\t\t\tif ((!v.separator.includes('https://dl.dropboxusercontent.com/'))\r\n\t\t\t\t\t\t&& (!v.separator.includes('https://konda86.ru/'))) {\r\n\t\t\t\t\t\tif (typeof (v.phones) !== \"undefined\") {\r\n\t\t\t\t\t\t\tif (String(v.phones).indexOf(\";\") > -1) {\r\n\t\t\t\t\t\t\t\tlet big_formule = 0;\r\n\t\t\t\t\t\t\t\tvar arr_phones = v.phones.split(\";\");\r\n\t\t\t\t\t\t\t\tvar filtred_phones = arr_phones.filter((ph) => ph.replace(/\\D+/g, '').replace(/[()]/g, ''));\r\n\t\t\t\t\t\t\t\tpull[l][n][j].phones = filtred_phones.join(\";;\").replace(/\\s+/g, '').replace(/[()]/g, '');\r\n\t\t\t\t\t\t\t\tbig_formule = 27 - 3 - (filtred_phones.length * 2) - v.separator.match(/;/ig).length;\r\n\t\t\t\t\t\t\t\tpull[l][n][j].separator = ';'.repeat(big_formule) + v.separator;\r\n\t\t\t\t\t\t\t\t//console.log(\"Letter: \"+l+\" CAT: \"+n+\" FIRM: \"+j);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlet little_formule = 0;\r\n\t\t\t\t\t\t\t\tpull[l][n][j].phones = v.phones.replace(/[()]/g, '');\r\n\t\t\t\t\t\t\t\tlittle_formule = 27 - 5 - v.separator.match(/;/ig).length;\r\n\t\t\t\t\t\t\t\tpull[l][n][j].separator = ';'.repeat(little_formule) + v.separator;\r\n\t\t\t\t\t\t\t\t//console.log(\"little_formule: \"+pull[l][n][j].separator.match(/;/ig).length);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (typeof (v.phones) !== \"undefined\") {\r\n\t\t\t\t\t\t\tif (String(v.phones).indexOf(\";\") > -1) {\r\n\t\t\t\t\t\t\t\tlet big_formule = 0;\r\n\t\t\t\t\t\t\t\tvar arr_phones = v.phones.split(\";\");\r\n\t\t\t\t\t\t\t\tvar filtred_phones = arr_phones.filter((ph) => ph.replace(/\\D+/g, '').replace(/[()]/g, ''));\r\n\t\t\t\t\t\t\t\tpull[l][n][j].phones = filtred_phones.join(\";;\").replace(/\\s+/g, '').replace(/[()]/g, '');\r\n\t\t\t\t\t\t\t\tbig_formule = 27 - 2 - (filtred_phones.length * 2) - v.separator.match(/;/ig).length;\r\n\t\t\t\t\t\t\t\tpull[l][n][j].separator = ';'.repeat(big_formule) + v.separator;\r\n\t\t\t\t\t\t\t\t//console.log(\"Letter: \"+l+\" CAT: \"+n+\" FIRM: \"+j);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlet little_formule = 0;\r\n\t\t\t\t\t\t\t\tpull[l][n][j].phones = v.phones.replace(/[()]/g, '');\r\n\t\t\t\t\t\t\t\tlittle_formule = 27 - 4 - v.separator.match(/;/ig).length;\r\n\t\t\t\t\t\t\t\tpull[l][n][j].separator = ';'.repeat(little_formule) + v.separator;\r\n\t\t\t\t\t\t\t\t//console.log(\"little_formule: \"+pull[l][n][j].separator.match(/;/ig).length);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};//\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\t//pull['Т'][755][0].selector = Letter: Ю CAT: 575 FIRM: 4\r\n\t\tlet concate = [];\r\n\t\tObject.values(pull['Т'][755][0]).map((v) => {\r\n\t\t\tconcate.push(v);\r\n\t\t})\r\n\t\t//console.log(pull['Т'][757][0]);\r\n\t\tconsole.log(concate.join(';') + \";\");\r\n\t\tconsole.log(concate.join(';').match(/;/ig).length);\r\n\t\tconcate = [];\r\n\t\tObject.values(pull['Т'][757][0]).map((v) => {\r\n\t\t\tconcate.push(v);\r\n\t\t})\r\n\t\tconsole.log(concate.join(';') + \";\");\r\n\t\t//'абв'.repeat(2); \r\n\t\t//Array(n + 1).join(\"abc\")\r\n\r\n\t\t/* \t\t\t\t\t\t\tthis.with_choose[v.selector] = {\r\n\t\t\t\t\t\t\t\tafter: 24 - (filtred_phones.length * 2) - v.separator.match(/;/ig).length,\r\n\t\t\t\t\t\t\t\tplus: ';;'.repeat(filtred_phones.length),\r\n\t\t\t\t\t\t\t\ttotal: '27'\r\n\t\t\t\t\t\t\t}; */\r\n\t\treturn pull;\r\n\t};\r\n\r\n\t// Dinamic banner\r\n\tpay_banner = (banner) => (i) => {\r\n\t\tlet pull = JSON.parse(JSON.stringify(i));\r\n\t\tconsole.log(\"pay_banner: 100%\");\r\n\t\tlet uides = Object.keys(i).map((uid) => uid);\r\n\t\t//Оплаченный баннер\r\n\t\tbanner.map((b) => {\r\n\t\t\tuides = uides.filter((el) => !b.groups.includes(el));\r\n\t\t\tb.groups.map((g) => {\r\n\t\t\t\tif (pull[g][1].selector === b.selector) {\r\n\t\t\t\t\tpull[g][1].separator = \";0;;\" + b.banner;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t})\r\n\t\t// Универсальный баннер\r\n\t\tuides.map((N) => {\r\n\t\t\tpull[N].push({\r\n\t\t\t\tcategory: pull[N][0].category,\r\n\t\t\t\tnomination: \"Место под ваш баннер\",\r\n\t\t\t\tspecification: \"Место продаётся\",\r\n\t\t\t\taddress: \"Междурученский\",\r\n\t\t\t\tphones: \"999-999-99-99\",\r\n\t\t\t\tselector: '000',\r\n\t\t\t\tseparator: \";0;;https://dl.dropboxusercontent.com/s/665ejhswg3pyls0/%D0%9F%D0%9F%20-%20mid.jpg?dl=0\"\r\n\t\t\t});\r\n\t\t})\r\n\r\n\t\t//console.log(pull);\r\n\t\treturn pull;\r\n\t}\r\n\r\n\tpopular = (all_categories) => (indexes) => {\r\n\t\tconsole.log(\"category: \" + Object.values(indexes).length);\r\n\t\tlet reverse = [];\r\n\t\tObject.keys(indexes).reduce((prev, key) => {\r\n\t\t\tObject.values(indexes[key]).map((v, k) => {\r\n\t\t\t\t//console.log(prev);\r\n\t\t\t\tswitch (key) {\r\n\t\t\t\t\tcase '755':\r\n\t\t\t\t\t\tprev[key] = prev[key] || [];\r\n\t\t\t\t\t\tv.category = 'Такси';\r\n\t\t\t\t\t\tif (k === 0) { v.separator = ';1' }\r\n\t\t\t\t\t\tprev[key].push(v);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '588':\r\n\r\n\t\t\t\t\t\tprev[key] = prev[key] || [];\r\n\t\t\t\t\t\tv.category = 'Кафе';\r\n\t\t\t\t\t\tif (k === 0) { v.separator = ';2'; }\r\n\t\t\t\t\t\tprev[key].push(v);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '751':\r\n\r\n\t\t\t\t\t\tprev[key] = prev[key] || [];\r\n\t\t\t\t\t\tv.category = 'Грузоперевозки';\r\n\t\t\t\t\t\tif (k === 0) { v.separator = ';3'; }\r\n\t\t\t\t\t\tprev[key].push(v);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '676':\r\n\r\n\t\t\t\t\t\tprev[key] = prev[key] || [];\r\n\t\t\t\t\t\tv.category = 'Парикмахерские';\r\n\t\t\t\t\t\tif (k === 0) { v.separator = ';4'; }\r\n\t\t\t\t\t\tprev[key].push(v);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '597':\r\n\r\n\t\t\t\t\t\tprev[key] = prev[key] || [];\r\n\t\t\t\t\t\tv.category = 'Ремонт компъютеров';\r\n\t\t\t\t\t\tif (k === 0) {\r\n\t\t\t\t\t\t\tv.separator = ';5';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tprev[key].push(v);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '582':\r\n\t\t\t\t\t\tprev[key] = prev[key] || [];\r\n\t\t\t\t\t\tv.category = 'Гостиницы';\r\n\t\t\t\t\t\tif (k === 0) {\r\n\t\t\t\t\t\t\tv.separator = ';6';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tprev[key].push(v);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '654':\r\n\t\t\t\t\t\tprev[key] = prev[key] || [];\r\n\t\t\t\t\t\tv.category = 'Аптеки';\r\n\t\t\t\t\t\tif (k === 0) {\r\n\t\t\t\t\t\t\tv.separator = ';7';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tprev[key].push(v);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '612':\r\n\t\t\t\t\t\tprev[key] = prev[key] || [];\r\n\t\t\t\t\t\tv.category = 'Фотоуслуги';\r\n\t\t\t\t\t\tif (k === 0) {\r\n\t\t\t\t\t\t\tv.separator = ';8';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tprev[key].push(v);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tlet category = all_categories.filter((c) => Number(c.selector) === Number(key));\r\n\t\t\t\t\t\tprev[key] = prev[key] || [];\r\n\t\t\t\t\t\tv.category = R.trim(String(category[0].name)).replace(/\\&\\#\\d{4};/g, '').replace(/,/ig, ' |');\r\n\t\t\t\t\t\tprev[key].push(v);\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\treverse = prev;\r\n\t\t\treturn prev;\r\n\t\t}, {});\r\n\t\t//console.log(reverse);\r\n\t\treturn reverse;\r\n\t}\r\n\t// Искуственное добавление недостающих обьектов.\r\n\timpurity = () => (i) => {\r\n\t\tlet pull = R.clone(i);\r\n\t\tpull[999] = [];\r\n\t\tlet plus = [\r\n\t\t\t{ category: \"Экстренные службы\", nomination: \"Единый номер экстренной оперативной службы\", specification: \"Единый номер экстренной оперативной службы\", address: \"\", phones: \"112\", separator: \";1;1;9\" },\r\n\t\t\t{ category: \"Экстренные службы\", nomination: \"Пожарная и МЧС\", specification: \"Пожарная и МЧС\", address: \"Пожарная и МЧС\", phones: \"101\", separator: \";1;2;\" },\r\n\t\t\t{ category: \"Экстренные службы\", nomination: \"Полиция\", specification: \"Полиция\", address: \"Полиция\", phones: \"102\", separator: \";1;3;\" },\r\n\t\t\t{ category: \"Экстренные службы\", nomination: \"Скорая помощь\", specification: \"Скорая помощь\", address: \"Скорая помощь\", phones: \"103\", separator: \";1;4;\" }\r\n\t\t];\r\n\t\tObject.values(plus).map((v) => {\r\n\t\t\tpull[999].push(v);\r\n\t\t})\r\n\t\t// Если вы хотите создать новую переменную функцию, которая принимает каждый список в качестве отдельного аргумента, вы можете обернуть функцию с помощью R.unapply.\r\n\t\t//const all = R.unapply(R.reduce(R.concat, []));\r\n\t\t//pull = all(i, plus);\r\n\t\t//console.log(pull['Э'][999]);\r\n\t\tconsole.log(\"plus: Ok\");\r\n\t\t//console.log(pull);\r\n\t\treturn pull;\r\n\t}\r\n\t// A --> 374 --> [{}]\r\n\tcomplex = () => (i) => {\r\n\t\tlet pull = R.clone(this.with_vocabulary);\r\n\t\tconsole.log(\"complex: Ok\");\r\n\t\t// Отсортирует номера категорий по алфавиту +заполнит ключи категорий обьектами компаний [{}].\r\n\t\tthis.with_characters.map((l) => {\r\n\t\t\tObject.keys(i).map((key) => {\r\n\t\t\t\tObject.values(i[key]).map((v, k) => {\r\n\t\t\t\t\tif (!this.with_vocabulary[l].includes(key)) {\r\n\t\t\t\t\t\tif (v.category.charAt(0) === String(l)) {\r\n\t\t\t\t\t\t\tpull[l][key] = pull[l][key] || [];\r\n\t\t\t\t\t\t\tpull[l][key].push({\r\n\t\t\t\t\t\t\t\t'category': v.category,\r\n\t\t\t\t\t\t\t\t'nomination': v.nomination,\r\n\t\t\t\t\t\t\t\t'address': v.address,\r\n\t\t\t\t\t\t\t\t'specification': v.specification,\r\n\t\t\t\t\t\t\t\t'phones': v.phones,\r\n\t\t\t\t\t\t\t\t'separator': v.separator\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t})\r\n\t\t//console.log(pull);\r\n\t\treturn pull;\r\n\t}\r\n\t// Сортировка комплексного обьекта. \r\n\tsorting = () => (i) => {\r\n\t\tconsole.log(\"lifting: \");\r\n\r\n\t\tlet uides = Object.keys(i).map((uid) => uid);\r\n\t\tlet blank = [];\r\n\t\tconsole.log(i);\r\n\t\tObject.keys(i).reduce((pull, le) => {\r\n\t\t\tObject.entries(i[le]).map(([id, fi]) => {\r\n\t\t\t\tconsole.log(uides);\r\n\t\t\t\tconsole.log(fi);\r\n\t\t\t\tpull[le][id] = fi[0].category || [];\r\n\t\t\t})\r\n\r\n\t\t}, []);\r\n\r\n\t\tconsole.log(blank);\r\n\t\t/* \t\tfunction compare( a, b ) {\r\n\t\t\t\t\tif ( a.category < b.category ){\r\n\t\t\t\t\t  return -1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ( a.category > b.category ){\r\n\t\t\t\t\t  return 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn 0;\r\n\t\t\t\t  }\r\n\t\t\t\t  \r\n\t\t\t\t  pull.sort( compare ); */\r\n\t\t// console.log(pull);\r\n\t\treturn i;\r\n\t}\r\n\t// Поднимает баннеры выше всех компаний\r\n\tlifting = () => (i) => {\r\n\t\tconsole.log(\"lifting: \");\r\n\t\tlet pull = R.clone(i);\r\n\t\tlet swap = {};\r\n\t\t//console.log(pull);\r\n\t\tObject.entries(i).map(([key_a, va]) => {\r\n\t\t\tObject.entries(i[key_a]).map(([key_n, vn]) => {\r\n\t\t\t\tObject.values(i[key_a][key_n]).reduce((prev, raw, k) => {\r\n\t\t\t\t\tif (typeof (raw.separator) !== \"undefined\") {\r\n\t\t\t\t\t\tif (raw.separator.includes(';https://konda86.ru/a/')) {// \r\n\t\t\t\t\t\t\tswap = i[key_a][key_n][1];\r\n\t\t\t\t\t\t\tpull[key_a][key_n][1] = raw;\r\n\t\t\t\t\t\t\tpull[key_a][key_n][k] = swap;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (raw.separator.includes(';https://dl.dropboxusercontent.com/s/')) {// \r\n\t\t\t\t\t\t\t\tswap = i[key_a][key_n][1];\r\n\t\t\t\t\t\t\t\tpull[key_a][key_n][1] = raw;\r\n\t\t\t\t\t\t\t\tpull[key_a][key_n][k] = swap;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\tconsole.log(pull['Р'][597]);\r\n\t\treturn pull;\r\n\t};\r\n\r\n\t// Ok Преобразователь сложного обьекта в плоский массив обьектов\r\n\tlinear = () => (i) => {\r\n\t\tlet pull = [];\r\n\t\tconsole.log(\"flatten: Ok\");\r\n\t\tObject.values(i).map((next) => {\r\n\t\t\tObject.values(next).map((v) => {\r\n\t\t\t\tObject.values(v).map((e) => {\r\n\t\t\t\t\tpull.push(e);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t\t//console.log(pull);\r\n\t\treturn pull;\r\n\r\n\t\t//const pully = Object.keys(pull).map((_) => pull[_]);\r\n\r\n\r\n\t\t//indexes.length = 0;\r\n\t\t//Object.values(indexes).push(flatter);\r\n\t\t//if(v === indexes[v].length-1){\r\n\t\t//return R.flatten(Object.values(indexes));\r\n\t}\r\n\t// Обнуление селекторов\r\n\tcollector = () => (i) => {\r\n\t\tlet pull = [];\r\n\t\tObject.values(i).map((v) => {\r\n\t\t\t//console.log(v);\r\n\t\t\tv.selector = \"\"; pull.push(v);\r\n\t\t});\r\n\t\treturn pull;\r\n\t};\r\n\t// Коррекция баланса символов [;]\r\n\tcorrector = () => (i) => {\r\n\t\tObject.values(i).map((v) => {\r\n\t\t\tif (typeof (v) !== \"undefined\") {\r\n\t\t\t\t//console.log(Object.values(v).join(\"\").match(/;/ig).length);\r\n\t\t\t\tlet lengher = v.separator.match(/;/ig).length;\r\n\t\t\t\tif (v.separator.includes('https://konda86.ru/')) {\r\n\t\t\t\t\tif (lengher !== 22) {\r\n\t\t\t\t\t\tlet diverge = 22 - lengher;\r\n\t\t\t\t\t\tif (lengher > 22) {\r\n\t\t\t\t\t\t\tconsole.log('separator:' + v.separator);\r\n\t\t\t\t\t\t\tconsole.log('lengher:' + lengher);\r\n\t\t\t\t\t\t\tconsole.log('22 < ' + diverge);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (lengher < 22) {\r\n\t\t\t\t\t\t\tconsole.log('separator:' + v.separator);\r\n\t\t\t\t\t\t\tconsole.log('lengher:' + lengher);\r\n\t\t\t\t\t\t\tconsole.log('22 > ' + diverge);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//console.log('+PAY BANNER');\r\n\t\t\t\t\t//console.log(v.separator.match(/;/ig).length);\r\n\t\t\t\t\t//v.separator = v.separator.slice(-cut);\r\n\t\t\t\t\t//console.log(v.separator.match(/;/ig).length);\r\n\t\t\t\t}\r\n\t\t\t\tif (v.separator.includes('https://dl.dropboxusercontent.com/')) {\r\n\t\t\t\t\t//console.log('+FREE BANNER');\r\n\t\t\t\t\t//console.log(v.separator.match( /;/ig ).length);\r\n\t\t\t\t\t//v.separator = v.separator.slice(-cut);\r\n\t\t\t\t\t//console.log(v.separator.length);\r\n\t\t\t\t}\r\n\t\t\t\tif ((!v.separator.includes('https://dl.dropboxusercontent.com/'))\r\n\t\t\t\t\t&& (!v.separator.includes('https://konda86.ru/'))) {\r\n\t\t\t\t\t//console.log('NOT BANNER');\r\n\t\t\t\t\t//console.log(v.separator.match( /;/ig ).length);\r\n\t\t\t\t\t//v.separator = v.separator.slice(-cut);\r\n\t\t\t\t\t//console.log(v.separator.length);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn i;\r\n\t}\r\n\thelper = () => (i) => {\r\n\t\t// Балансировщик количества ;\r\n\t\t// Подсчёт всех ; в строке\r\n\t\tlet pull = [];\r\n\t\tObject.values(i).reduce((prev, next, k) => {\r\n\t\t\tprev = Object.values(next).join(\";\");\r\n\t\t\t//let char = prev.match(/;/g).length\r\n\t\t\t//console.log(char)\r\n\t\t\tpull.push(prev);\r\n\t\t}, \"\")\r\n\t\tconsole.log(pull);\r\n\t\treturn pull;\r\n\t\t//R.sortBy(R.compose(R.toLower, R.prop('category'))),\r\n\t\t// Удаление лишних ;\r\n\t\t// Добавление не достающих ;\r\n\t\t// error функция в случае не соответствия количества символов.\r\n\r\n\r\n\t\t/* \t\tif(indexes[v][k].separator.includes(';https://dl.dropboxusercontent.com/s/')){\r\n\t\t\t\t\tlet swap = indexes[v][2];\r\n\t\t\t\t\tindexes[v][2] = indexes[v][k];\r\n\t\t\t\t\tindexes[v][k] = swap;\r\n\t\t\t\t} */\r\n\t\t// Клонирование массива\r\n\t\t//let clone = arr.slice(0); --> little arr\r\n\t\t//let clone = [].concat(arr); --> big arr\r\n\t\t//let clone = [...arr]; --> big arr\r\n\t\t//let pull = arr.map(o => Object.assign({}, o)); --> big arr\r\n\t\t// Клонирование обьекта\r\n\t\t//let clone = JSON.parse(JSON.stringify(i));\r\n\t\t//const ageNameSort = R.sortBy(R.prop('category'));ageNameSort(i[key]);\r\n\r\n\t\t// Порядок ключей сбивается! Переписать нужно.\r\n\t\t//let blank_flatter = Object.assign({}, ...Array.from(index_flatten, (v) => ({ [v]: [] })));\r\n\t\t// Формирует обьект с ключами категорий в алфавитном порядке\r\n\t\t//let pull = JSON.parse(JSON.stringify(index));\r\n\t\t//console.log(pull);\r\n\t\t// Object.entries(index).map(([nv, key]) => {\r\n\t\t// \tObject.values(i).map((collection) => {\r\n\t\t// \t\tObject.values(blank_flatter[key]).push(collection[key]);\r\n\t\t// \t})\r\n\t\t// })\r\n\t\t//console.log(index_flatten);\r\n\t\t//let index_flatten = [];\r\n\t\t// Порядок соблюдается, но это просто массив ключей категорий\r\n\t\t//Object.values(pull).map((o) => {\r\n\t\t//\to.map((n) => {\r\n\t\t//\t\tindex_flatten.push(n);\r\n\t\t//\t})\r\n\t\t//});\r\n\t\t// Все функции ramda каррированы. Массив будет передаваться от 1 функции вверх!\r\n\t\t/* \t\tconst curring = R.compose(\r\n\t\t\t\t\tR.splitEvery(), --> 3\r\n\t\t\t\t\tR.contains(), --> 2\r\n\t\t\t\t\tR.flatten() --> 1\r\n\t\t\t\t);\r\n\t\t\t\tcurring(indexes); */\r\n\t}\r\n\r\n\r\n\r\n}\r\n\r\nexport { Extender };","import React, { Component } from \"react\";\r\nimport * as R from \"ramda\";\r\nimport { ExportToCsv } from \"./export-to-csv\";\r\nimport { Extender } from \"./extender\";\r\nclass Csv extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tall_companies: [],\r\n\t\t\tall_categories: [],\r\n\t\t\tcsv_companies: [],\r\n\t\t\tpre_loading: true,\r\n\t\t\tlengher: 0\r\n\t\t}\r\n\t\tthis._get_companies = this.get_companies;\r\n\t\tthis._get_categories = this.get_categories;\r\n\t\tthis._generate_csv_base = this.generate_csv_base;\r\n\t\tthis._csv_exporter = this.csv_exporter;\r\n\t}\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\tconsole.log(nextState);\r\n\t\tif (nextState.pre_loading\r\n\t\t\t&& (this.state.all_companies !== nextState.all_companies\r\n\t\t\t\t&& this.state.all_categories !== nextState.all_categories\r\n\t\t\t\t&& this.state.csv_companies !== nextState.csv_companies\r\n\t\t\t)) {\r\n\t\t\tthis.setState({ pre_loading: false })\r\n\t\t\treturn true\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tasync get_companies() {\r\n\t\tconst response = await fetch('https://konda86.ru/api.php?req=ALL_USER');\r\n\t\tconst all_companies = await response.json();\r\n\t\treturn all_companies;\r\n\r\n\t}\r\n\tasync get_categories() {\r\n\t\tconst response = await fetch('https://konda86.ru/api.php?req=SUB_CATEGORY');\r\n\t\tconst all_categories = await response.json();\r\n\t\treturn all_categories;\r\n\t}\r\n\r\n\tgenerate_csv_base(all_companies, all_categories) {\r\n\t\tconst x = new Extender();\r\n\t\tx._init(all_categories);\r\n\t\tx._assembly_banner(all_companies);\r\n\t\tconst curry = R.compose(\r\n\t\t\t//x._collector(),\r\n\t\t\tx._linear(),\r\n\t\t\t//x._corrector(),// Вставка ; нужного колличества\r\n\t\t\tx._contacts(),\r\n\t\t\tx._location(),\r\n\t\t\tx._lifting(),\r\n\t\t\tx._complex(),\t\r\n\t\t\tx._impurity(),\t\t\r\n\t\t\tx._banner(x.with_banner),\r\n\t\t\tx._premium(x.with_premium),\r\n\t\t\tx._popular(all_categories),\r\n\t\t\tx._merge(all_companies)\t\t\t\r\n\t\t);\r\n\t\tlet pull = curry(x.with_structure);\r\n\t\treturn { all_companies: pull };\r\n\t}\r\n\tcsv_exporter(arr) {\r\n\t\tconst options = {\r\n\t\t\tfieldSeparator: \";\",\r\n\t\t\tquoteStrings: '',\r\n\t\t\tdecimalSeparator: '.',\r\n\t\t\tshowLabels: false,\r\n\t\t\tshowTitle: false,\r\n\t\t\tuseTextFile: false,\r\n\t\t\tuseBom: false,\r\n\t\t\tuseKeysAsHeaders: false\r\n\t\t}\r\n\t\tconst csvExporter = new ExportToCsv(options);\r\n\t\tcsvExporter.generateCsv(arr);\r\n\t}\r\n\r\n\tasync exporting() {\r\n\t\tconst all_company = await this.get_companies();\r\n\t\tconst all_category = await this.get_categories();\r\n\t\tconst csv_base = await this.generate_csv_base(all_company, all_category);\r\n\t\tthis.setState({\r\n\t\t\tall_companies: all_company,\r\n\t\t\tall_categories: all_category,\r\n\t\t\tcsv_companies: csv_base.all_companies\r\n\t\t})\r\n\t\treturn true\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { csv_companies } = this.state;\r\n\t\tif (this.exporting()) { console.log('loading...') }\r\n\t\treturn (\r\n\t\t\t<div>\r\n\r\n{(csv_companies) ? (\t\t\t\t<a class=\"face-button\" href=\"#\" onClick={() => this._csv_exporter(csv_companies)}>\r\n\r\n  <div class=\"face-primary\">\r\n    <span class=\"icon fa fa-cloud\"></span>\r\n    Скачать\r\n  </div>\r\n  \r\n  <div class=\"face-secondary\">\r\n    <span class=\"icon fa fa-hdd-o\"></span>\r\n    Размер: 218 кб\r\n  </div>\r\n\r\n</a>) : (null)}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\nexport default Csv;\r\n","import React from \"react\";\nimport { render } from \"react-dom\";\n\nimport Csv from './package/exporter';\n// Mount React App\nrender(<Csv/>,document.getElementById(\"root\"));\n\n\n/*\nimport React from \"react\";\nimport { render } from \"react-dom\";\n\nimport Legacy from './containers/application/legacy';\n// Mount React App\nrender(<Legacy/>,document.getElementById(\"root\"));\n*/\n"],"sourceRoot":""}